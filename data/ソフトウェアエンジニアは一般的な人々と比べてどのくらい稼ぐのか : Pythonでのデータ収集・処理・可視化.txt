<p><a href="http://ramiro.org/notebook/income-software-engineers-countries/">What Software Engineers Earn Compared to the General Population</a> （2016-04-08） by <a href="https://twitter.com/yaph" rel="nofollow" title="" class="ext-link">Ramiro Gómez</a></p><p><small>(訳注：2016/7/15、記事を修正いたしました。)</small></p><p>本記事では、世界50カ国におけるソフトウェアエンジニアの年収の中央値と国内の年収の平均値（1人当たりのGDP）を比較します。その方法は、まず<a href="http://lxml.de/" rel="nofollow" title="" class="ext-link">lxml</a>を使ってWebページからデータを収集し、<a href="http://pandas.pydata.org/" rel="nofollow" title="" class="ext-link">Pandas</a>のデータフレームに変換した後、クリーニングを行います。そのデータに対し<a href="http://matplotlib.org/" rel="nofollow" title="" class="ext-link">matplotlib</a>を使い、全体としての傾向を可視化する散布図と棒グラフを作成するというものです。一般的な人々と比較するとソフトウェアエンジニアはどのくらい稼いでいるのか、その収入が高い国と低い国を比較してみましょう。</p><p>データは<a href="http://www.payscale.com/" rel="nofollow" title="" class="ext-link">PayScale</a>と<a href="http://www.imf.org/" rel="nofollow" title="" class="ext-link">国際通貨基金（IMF）</a>から得たもので、2014年5月に<a href="http://www.bloomberg.com/visual-data/best-and-worst/highest-paid-software-engineers-countries" rel="nofollow" title="" class="ext-link">Bloomberg</a>に掲載されたものです。そこに、PayScaleが最も入手しやすい50カ国の統計データが含まれていました。ソフトウェアエンジニアに関するその統計データは2013年5月1日～2014年5月1日の収入データで、2014年5月5日時点の為替レートを使って換算されています。調査に回答した各国のソフトウェアエンジニアの実務経験年数の中央値は2～5年に及んでいました。</p><p>まず、必要なライブラリをロードし、プロットスタイルといくつかの変数を設定します。このとき、<a href="https://github.com/yaph/geonamescache" rel="nofollow" title="" class="ext-link">geonamescache</a>オブジェクトも設定します。地理データと年収の統計データをこの<a href="http://ramiro.org/map/world/income-software-engineers-countries/">インタラクティブマップ</a>でリンクさせるため、国コードの追加が必要になるからです。</p><p>Webページからデータを収集するため、ソースを調べて、データテーブルを特定する方法を決めました。データテーブルは、そのページで<code>hid</code>のクラスを持つ唯一のテーブルなので、以下のxpathの式で、ロード後にHTMLソースからテーブルを抽出することができるようにしています。</p><p>Pandasを使えば、この生データのHTML文字列を簡単にデータフレームへ変換できます。ここでは、<code>Rank</code>列をインデックスとして、1行目をヘッダとして使うようにPandasを設定します。<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_html.html" rel="nofollow" title="" class="ext-link">read_html</a>関数はリストを返しますが、今回は1つのデータフレームオブジェクトのリストとなりますので、この結果を得たら最初の数行を表示します。</p><p>さらに、Pandasにより自動的に決定されたデータタイプを表示します。</p><p>さらなる調査に進む前に、出力結果を見ると、クリーニングの必要なものがいくつかあると分かりますね。<code>Country</code>列の値は全てスペースの後にtが続いて終わるという形になっていますから、単純にこれを削除します。また、ドルで表されている金額についても、ここの数値は計算やプロットに使用するため、数値型に変換する必要があります。</p><p>これで良くなったようです。サニティチェックとして、データに含まれている上記の比率がそれぞれの年収の数値に基づくものとして合っているか、確認するといいでしょう。つまり、自分たちの手で比率を計算し、既存の数値と同じになるかチェックするのです。</p><p>全体像を見るため、まずは散布図を作成します。これは世界50カ国全てのレコードがプロットされるもので、X軸はソフトウェアエンジニアの年収の中央値を、Y軸は国内の年収の平均値を示します。さらに、傾向の有無を確かめるため、二次多項式で求めた近似曲線を描きます。</p><p><img alt="png" src="http://ramiro.org/img/large/income-software-engineers-countries_files/income-software-engineers-countries_14_0.png"> <em>注釈<br>
タイトル：世界50カ国における、ソフトウェアエンジニアの年収の中央値と国内の年収の平均値の比較<br>
X軸：ソフトウェアエンジニアの年収の中央値<br>
Y軸：国内の年収の平均値<br>
注記：2013年5月～2014年5月の収入データを、2014年5月の為替レートで換算した数値を使用。平均年収は2014年の数値。</em></p><p>上の図と以下で作成する図を読み取っていく前に、このデータの問題点をいくつか挙げておきましょう。まず、PayScaleの調査に回答した人数が不明で、回答者の実務経験年数は2～5年の範囲に分散しています。このサンプルが各国のソフトウェアエンジニアの収入をきちんと代表しているかは不確かなのです。</p><p>その上、ここで比較しているのは、ソフトウェアエンジニアの年収の中央値と、国内の年収の平均値です。<a href="http://ramiro.org/notebook/top-incomes-share/">上位の稼ぎ手の収入が全体の高い割合を占めている</a>国がいくつもあることを考えると、国内の年収の中央値と比べた場合は、図の形は違ったものになりそうです。</p><p>そのことを念頭に置いた上での話ですが、ソフトウェアエンジニアは、50カ国の大多数では、職業の中で望ましい選択肢となっているようです。図の左下を見ると、ミドルレベルのソフトウェアエンジニアが平均的な人の何倍も稼いでいる国がありますね。ただし、ソフトウェアエンジニアの方がずっと収入の少ない国もあります。ソフトウェアエンジニアの収入に関する上位と下位の国を突き止めるために、次はランキングを棒グラフで表してみましょう。</p><p>以下の棒グラフでは、平均収入に対するソフトウェアエンジニアの収入の中央値の比率によって、各国を並べます。データフレームは既にその比率で上位から下位へと並んでいますので、単純にheadメソッドとtailメソッドを使えば、表示したい部分のレコードを得ることができます。</p><p>では、2種類の棒グラフを含む図を作成しましょう。ソフトウェアエンジニアの収入比率が高い国を左側のグラフに、低い国を右側のグラフに示します。</p><p><img alt="png" src="http://ramiro.org/img/large/income-software-engineers-countries_files/income-software-engineers-countries_18_0.png"><br>
<em>注釈<br>
タイトル：平均収入に対するソフトウェアエンジニアの収入の中央値の比率で見た、上位国と下位国<br>
注記：2013年5月～2014年5月の収入データを、2014年5月の為替レートで換算した数値を使用。平均年収は2014年の数値。</em></p><p>上の図を見ても、収入格差が非常に大きな国があり、ソフトウェアエンジニアが平均より多く稼ぎそうだということが分かります。このデータセットでは、平均年収が最も低い国はパキスタンとインドで、平均年収が最も高い国はノルウェー、カタールの順です。推測するに、比率が高い国での収入分布は低収入に、比率の低い国での収入分布は高収入に偏っているのだと思います。やはり、中央値と平均値ではなく、中央値と中央値を比べた方が面白いのですが、そのような比較をするには別のデータソースを見つけるしかありません。</p><p>この最後の短いセクションでは、<a href="http://ramiro.org/map/world/income-software-engineers-countries/">インタラクティブなD3.jsベースのマップ</a>でデータを可視化するために、今回のデータセットに<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3" rel="nofollow" title="" class="ext-link">ISO 3166-1 Alpha-3</a>の国コードを追加する方法をご紹介します。</p><p>ここで、冒頭で初期設定したgeonamescacheオブジェクトを使って、名前をキーとする国の辞書を得ます。この値も辞書となっており、何よりISO 3166-1 Alpha-3の国コードを含んでいます。最後に、数バイトを節約するため国の列を削除して、データフレームをCSVファイルで保存します。</p><p>この記事では、50カ国におけるソフトウェアエンジニアの収入データを調べ、平均的な人の収入と比較しました。その過程では、ソースのWebページからデータセットを入手し、データのクリーニングを行い、可視化して結果を解釈すると共に、今回のデータセットと処理方法に潜む問題点を挙げました。</p><p>ソフトウェアエンジニアは、大多数の国では望ましい職業の1つとなっているようですが、移住計画を立てる前に上記の問題点をよく考慮するようにしましょう。また、職業や居住地を選ぶ際はきっと、収入が唯一の選択基準ではないはずです。</p><p>Author: <a href="http://ramiro.org/">Ramiro Gómez</a> • Last edited: April 08, 2016<br>
Linux 4.2.0-35-generic – CPython 3.5.1 – IPython 4.1.2 – matplotlib 1.5.1 – numpy 1.10.4 – pandas 0.18.0</p>
