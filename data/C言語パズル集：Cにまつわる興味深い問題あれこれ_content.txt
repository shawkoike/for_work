C PUZZLES, Some interesting C problems By Gowri Kumar Chandramouliビジターの皆さんへC言語に関心を寄せていただきありがとうございます。このページは、C言語の面白い問題、パズルのリストです。これまでに友人たちからeメールで送ってもらったり、本で読んだり、インターネットで見つけたり、あるいは自分でC言語でコーディングしていて気づいたりしたプログラムを集めました。多くのプログラムは、コンパイル、実行され、その振る舞いを示すものです。問題は大まかに次のカテゴリに分けられます。また、全てにGnu/Linux/gccを使っています。掲載順は、それぞれの難易度とは関係ありません。問題解決の助けが必要な場合は、気軽に私に問い合わせてください。連絡先はこちらです。また、私が個人的にとても面白く感じたC言語の文献もぜひ参考にしてください。大学での面接を控えているなら、次の記事もおすすめです。
http://placementsindia.blogspot.com
http://www.interviewmantra.net/category/interview-questions/c
(訳注:原文リンク切れ、正しくはこちらと思われます。)Gowri Kumar次のCプログラムは、配列の要素を表示してくれるはずです。しかし、実際に走らせてみると、期待した出力が得られません。何が間違っているのでしょうか。
ヒント次のコードを見て、私は完璧なCプログラムだと思いました。しかし、コンパイルする際に、下らない間違いを見つけてしまいました。何だか分かりますか？（コンパイルせずに指摘してください:-）ヒント次のプログラムからはどのような出力が得られるでしょうか？　また、その理由を答えてください。ヒント次のプログラムは”hello-out”と出力してくれるようには”見え”ません。（実行してみてください）どんな理由が考えられるでしょうか。このプログラムを見て、両方のprintfの出力は同じになると考える人がいるかもしれません。しかし、プログラムを走らせると、次の結果を取得します。
bash$ ./a.out
12f(1,2)
bash$なぜそうなるのでしょうか？
ヒント上記プログラムの出力がNONEになると予測したなら、本当にそうなるかぜひチェックをしてみてください!!次のCプログラムはIA-64ではセグメンテーション違反ですが、IA-32ではきちんと動きます。なぜそのようなことが起こるのでしょうか？ここに小さなプログラム（たったの14行）があり、ある数字にセットされたビット数を計算します。
入力     　　　出力
0   　　　　0(0000000)
5   　　　　2(0000101)
7   　　　　3(0000111)上のプログラムで使われているロジックを挙げてください。次のプログラムからは、どんな出力が得られると思いますか？　また、その理由も答えてください。（もし”fは1.0″だと思うのであれば、もう一度、確認してみてください）C言語のカンマ演算子について学んでいたので、次のCプログラムは完璧だと思っていました。しかし、このプログラムには誤りがあります。それは何でしょうか？次のCプログラムからは、どのような出力が得られるでしょうか？　（このCプログラムは正しく動くでしょうか？）上のC言語のコードは、正しく動くでしょうか？　もし動くのであれば、このコードによって何を得ることができますか？　なぜ、誰もがこのようなコードを書くのでしょうか？CountBitsを別のやりかたで実装したものです。このコードが正しいか検証してみてください（どのように検証しますか？）。コードが正しかった場合、そのロジックを挙げてください。次の2つの関数のプロトタイプ宣言は同じでしょうか？解答を導き出すには、次のプログラムが役に立つでしょう。（両方のプログラムをコンパイルし、実行してみてください。何が起こりますか？）
プログラム1：プログラム2：次のプログラムからは、どのような出力が得られるでしょうか？　また、その理由も答えてください。次のプログラムは、2つのファイルに分けた小さなCプログラムです。これらのファイルをコンパイルし、実行したとき、このプログラムからはどのような出力が得られるでしょうか？
File1.cFile2.c次のCプログラムの出力を説明してください（出力は20ではありません）。次のプログラムからは、どのような出力が得られるでしょうか？　（整数のサイズが4の場合、出力は40ではありません）次のプログラムは、エラーを表示するために、Errorと呼ばれる関数を利用した簡単なCプログラムです。Errorが定義されている方法で、考えられる問題はどんなことでしょうか？Scanfを使った次の2つの関数の呼び出しの違いは何でしょうか？　（2番目の関数の呼び出しでは、スペースがあることに注意しましょう。スペースを削除したときのプログラムの動きを観察してみてください）次のCプログラムで、考えられる問題はどんなことでしょうか？次のプログラムからは、どのような出力が得られるでしょうか？次のプログラムでは、なぜ警告が発せられるのでしょうか？　（constポインタを必要とする関数に対して通常のポインタを送ることについて、警告は発せられません）次のプログラムからは、どのような出力が得られるでしょうか？次のプログラムは、逆ポーランド計算機を実装するコードの一部です。このコードには重大なバグがあります。それを見つけてください。getop関数は、operandsやopcodes、EOFなどに対する妥当な戻り値を返すと想定してください。次のプログラムは、ほとんどのUNIX系システムで使用されているbannerコマンドの最小版を実装する簡単なプログラムです。プログラムで使用されているロジックを挙げてください。次のプログラムからは、どのような出力が得られるでしょうか？次のプログラムは、2つの整数のG.C.D（最大公約数）を見つけるために、ユークリッドの互除法を実装したものです。この実装のロジックを挙げてください。また、これ以外で可能性のある実装を考えてください。ところで、scanf関数が返すのは何でしょうか？さらに、4つの整数のGCDを見つけるために、上と似たようなC関数を実装してみましょう。次のプログラムからは、どのような出力が得らえるでしょうか？　（10ではありません）次のプログラムは、日付を読み込んだり、出力したりするための簡単なCプログラムです。これを実行して、その振る舞いを説明してください。次のプログラムは、整数を読み込んだり、出力したりするための簡単なCプログラムです。しかし、正しく動きません。問題を見つけてください。次のプログラムは、ビット演算子を使って整数を5倍にさせる簡単なCプログラムです。しかし、5倍になりません。プログラムが誤った振る舞いをしてしまう理由を説明してください。次のプログラムは、正しく動くでしょうか？次のプログラムは、マイナス記号を20回出力するように指示したCコードの一部です。お分かりだと思いますが、これでは動きません。このコードを修正するのはとても簡単です。問題が面白くなるように、こうしたいと思います。1文字だけ変えてこのコードを修正してみてください。答えは3つあります。さて、すべて答えられますか？次のコードは何が間違っているのでしょうか？次のプログラムからはどのような出力が得られるでしょうか？次のプログラムからはどのような出力が得られるでしょうか？次のプログラムに含まれるバグは何でしょうか？次のCプログラムは正しく動くでしょうか？　もし動く場合、どのような出力が得られるでしょうか？次のプログラムで、Life is beautifulと入力した場合、どのような出力が得られるでしょうか？注記 ：これはC言語というより、リンカに関連した問題です。
次のようなa.c、b.c、main.cという3つのファイルがあるとします。a.cb.cmain.cこれらのファイルを一緒にコンパイルするとどうなるか見てみましょう。うーん、リンカエラーが発生してコンパイルできません！　なぜでしょうか？次のマクロはオフセットを返すために、よく使われているものです。
このマクロの処理内容と、これを使用するメリットを挙げてください。次のコードは有名なTriple xor swapのマクロ実装です。上記のマクロではどのような問題が起こり得るでしょうか？次のマクロの用途は何でしょうか？IAddOverFlowという関数のコーディングを依頼されたとしましょう。この関数は、結果を格納する整数型変数へのポインタ1つと、加算する整数2つ、合計3つのパラメータを取ります。戻り値は、オーバーフローがあれば0、なければ1とします。あなたなら上記の関数をどうコーディングしますか？　（要はオーバーフローの検知に、どのようなロジックを使うかという質問です）次のマクロの役割は何でしょうか？Cプログラミングの本では大抵、マクロの定義として次のような例を挙げています。しかし上記のマクロ定義を次のように使用した場合、重大な問題が発生します。（その問題とは何でしょうか？）実際には大半のライブラリで、（types.hで宣言されている）isupperをマクロとして（特に副作用なく）実装しています。あなたのシステムでは、どのようにisupper()を実装しているか調べてみましょう。関数の引数となる変数を指定するためにellipsis (…)が使われていることは、ご存知でしょうか。（printf関数のプロトタイプ宣言はどうなるでしょうか？）　また、次の宣言の問題点は何でしょうか？3つの整数のうち最小のものを見つけるCプログラムを、比較演算子を一切使わずに書いてください。printf関数の書式指定子%nはどう動くでしょうか？“+”演算子を使わずに、2つの整数を加算するC言語の関数を書いてください。使用できるのはビット演算子だけです（ORやXORゲートなどを用いる古き良き全加算回路の実装方法を思い出しましょう）。どのようにすればprintf関数を使って、I can print %と出力できるでしょうか？
（%は書式指定子として使用されることを忘れないでください！）次の2つのC言語の宣言には、どのような違いがあるでしょうか？memcpy と memmoveの違いは何でしょうか？double型とfloat型の値を出力するprintf用の書式指定子は何でしょうか？マシンのタイプがリトルエンディアンかビッグエンディアンかを判別する、小さなCプログラムを書いてください。セミコロンを使わずにHello World!と出力するCプログラムを書いてください！
