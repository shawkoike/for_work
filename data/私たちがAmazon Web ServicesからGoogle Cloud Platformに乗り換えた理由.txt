<p><a href="https://lugassy.net/why-we-moved-from-amazon-web-services-to-google-cloud-platform-726c412fd667#.fbs7kltdj" rel="nofollow" title="" class="ext-link">Why we moved from Amazon Web Services to Google Cloud Platform?</a> （2016-07-23） by <a href="http://twitter.com/mluggy" rel="nofollow" title="" class="ext-link">Michael Lugassy</a>, Founder of <a href="https://adtecho.com/" rel="nofollow" title="" class="ext-link">Adtecho.com</a></p><p><a href="http://postd.cc/wp/wp-content/uploads/2016/09/1-IcgVwNpmQd50gKlMlHJFvw.jpeg"><img src="http://postd.cc/wp/wp-content/uploads/2016/09/1-IcgVwNpmQd50gKlMlHJFvw.jpeg" alt="1-icgvwnpmqd50gklmlhjfvw" width="800" height="533" class="alignnone size-full wp-image-7939"></a><br>
<a href="https://flic.kr/p/os8Taq" rel="nofollow" title="" class="ext-link">https://flic.kr/p/os8Taq</a></p><p><a href="https://reinvent.awsevents.com/" rel="nofollow" title="" class="ext-link">AWS re:Invent</a>（参加料は1,600ドル）に参加したり、チーフ･エバンジェリストの<a href="https://medium.com/@jeffbarr" rel="nofollow" title="" class="ext-link">Jeff Barr</a>をフォローしたりすれば、あなたはたちまち、Amazon Web Servicesのとりこになるでしょう。</p><p>毎年何百もの新機能が登場しており、食べ放題・融通が利く・運用担当者不要の、オンデマンドサービスのビュッフェのようです。まあ、実際に食べてみるまでは、の話ですが…。</p><p><a href="https://cloud.google.com/appengine/" rel="nofollow" title="" class="ext-link">GAE</a>はきちんと機能し、オートスケーリング機能も持ち、ロードバランサや無料のmemcacheも備えています。Cloud SQLに接続したいですか？　仮想のLinuxソケット、<a href="https://cloud.google.com/sql/docs/app-engine-connect" rel="nofollow" title="" class="ext-link">/cloudsql</a>を使ってください。カスタムログを書いて、それをすぐに見たいですか？　<a href="https://cloud.google.com/appengine/articles/logging" rel="nofollow" title="" class="ext-link">/var/log/app_engine/custom_logs</a>を追加するか、単にconsole.log()とconsole.error()を使ってください。本番環境であなたのアプリケーションをプロファイリングあるいはデバッグしたいですか？　<a href="https://cloud.google.com/trace/" rel="nofollow" title="" class="ext-link">StackDriverにブレークポイントを設定する</a>か、マネージドインスタンスに対してSSHで接続しましょう。</p><p>内部を見れば、GAEは100パーセントDockerだということが分かるでしょう。<a href="https://cloud.google.com/appengine/docs/python/microservices-on-app-engine" rel="nofollow" title="" class="ext-link">appspot.comのサービスディスカバリを利用して20個のマイクロサービスを実行</a>するためにGAEを使うか、より大きな規模で巨大なアプリケーションを1つ実行してください。</p><p><strong>追記：</strong>初期のGAE、特にビルトインのデータストアはどのような物だったのかについて、恐ろしい話を耳にしました。私はその当時のGAEやGoogle Cloudを使用した経験がないので、コメントすることができません。ブラインド･デートの前のように、いつでも立ち去れるように準備しておきましょう。キャッシュやデータ、メッセージストアのラッパーをコード化しておけば、テクロノジ（あるいはプロバイダ）を切り替えられます。</p><p>Googleでは、あらゆるCPU/メモリ構成で<a href="https://cloud.google.com/custom-machine-types/" rel="nofollow" title="" class="ext-link">カスタムマシンタイプ</a>を作れます。ワンクリックでより安い<a href="https://cloud.google.com/preemptible-vms/" rel="nofollow" title="" class="ext-link">プリエンプティブル</a>（<a href="https://aws.amazon.com/jp/ec2/spot/" rel="nofollow" title="" class="ext-link">スポット</a>のような）インスタンスを選ぶことができるようになります。入札やオークションのコードは全く必要ありません。</p><p>Googleは全てのVMをそれぞれ、高速でレイテンシの短いネットワーキングで接続します。Amazonでは、高価な<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-ec2-config.html" rel="nofollow" title="" class="ext-link">10Gの容量があるインスタンス</a>の購入か<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/enhanced-networking.html" rel="nofollow" title="" class="ext-link">ネットワーキングの拡張</a>のどちらか（あるいはその両方）が要求されます。</p><p>Googleではシンプルなファイアウォールのルールを設定できます。AmazonではVPCやセキュリティグループ、ネットワークアクセスコントロールリストが提供されますが、<a href="https://lugassy.net/why-should-i-care-about-amazon-vpc-ab454d050b5#.woz98c7sg" rel="nofollow" title="" class="ext-link">ひどい頭痛</a>も与えられるでしょう。</p><p><strong>追記</strong>：「AWS VPCは優れている。AWS VPCのおかげで、利用者はインスタンスをしっかりと守り、サンドボックスを作って内部ネットワークをコントロールすることができる」とコメントする人もいます。しかし、私には混乱の元です。なぜなら、基本的なポート番号やホームIPのルール以外にはほとんど必要なものがありません。しかし、もし殺人ミステリーのように接続の問題を全て調べたいなら、どうぞご自由に。</p><p>Googleの課金は1分単位です（1時間単位ではありません）。しかも<a href="https://cloud.google.com/compute/pricing#sud_table" rel="nofollow" title="" class="ext-link">長時間利用に対する自動ディスカウント</a>があります。<a href="https://aws.amazon.com/ec2/pricing/" rel="nofollow" title="" class="ext-link">無意味なリザーブドインスタンス料金</a>は全くありません（注意：AWS EC2の料金表のページはブラウザ上でクラッシュするかもしれません）。</p><p>メッセージバスを使いたいですか？　AWSの場合は<a href="https://aws.amazon.com/sns/" rel="nofollow" title="" class="ext-link">SNS</a>、<a href="https://aws.amazon.com/sqs/" rel="nofollow" title="" class="ext-link">SQS</a>、<a href="https://aws.amazon.com/kinesis/" rel="nofollow" title="" class="ext-link">Kinesis</a>、<a href="https://aws.amazon.com/kinesis/streams/" rel="nofollow" title="" class="ext-link">Kinesis Streams</a>、<a href="https://aws.amazon.com/kinesis/firehose/" rel="nofollow" title="" class="ext-link">Kinesis Firehose</a>があって頭が混乱するでしょう。GCPの場合は<a href="https://cloud.google.com/pubsub/" rel="nofollow" title="" class="ext-link">Pub/Sub</a>のみが使われ、その上、異常なほどスケーラブルです。</p><p><strong>追記：</strong>SQS（ホストはRabbitMQ？）とKinesis（ホストはKafka？）が別々のメッセージバスを使っていると気づきました。それより、量や速さに左右されない1つのメッセージプロダクトを使って動かすには、GCPを入手する方が良いように思います。</p><p><a href="https://cloud.google.com/bigquery/" rel="nofollow" title="" class="ext-link">Google BigQuery</a>はGB単位のデータ保存量やTB単位のクエリ処理結果に基づいた申し分のない料金体系があり、<a href="https://cloud.google.com/bigquery/docs/partitioned-tables" rel="nofollow" title="" class="ext-link">テーブルの日ごとへのパーティショニング</a>がビルトインで用意されており、変更がないパーティションには<a href="https://cloud.google.com/bigquery/pricing#long-term-storage" rel="nofollow" title="" class="ext-link">料金の50％引き下げ</a>があり（それゆえ比較的長期間にわたってデータを保存できます）、その上、SQLがフルサポートされています。</p><p><a href="https://cloud.google.com/dataflow/" rel="nofollow" title="" class="ext-link">Google Dataflow</a>は、バッチ処理やストリーミング処理において、データを思う存分に使って処理するための驚異的に優れたフレームワークです。ウィンドウ制御、自動で起動するデータ検証制御があり、変換も簡単です。</p><p><strong>追記：</strong>AWSは新しいサービスとして”Streams”の追加と組み込みを始めましたが、さらに困惑が深まってしまいました。Dataflowは、全てのI/Oターゲットを入出力の双方あるいは片方として扱うので、AWSよりも理解しやすくなっています。</p><p>Amazonで最も理解しがたいものが<a href="https://aws.amazon.com/iam/" rel="nofollow" title="" class="ext-link">IAM</a>です。特定のリソースの利用に時間帯やデバイスを限定するというロールをセットアップするのに優れている一方で、セットアップの時間のほとんどがポリシーのデバッグに取られます。</p><p>Googleのセキュリティはもっとリラックスしてセットアップできます。信頼のおける各”プロジェクト”の中で全てのリソースが利用できると想定しているのです。</p><p>さらに、Googleアカウントを持っている人しかプロジェクトへ招待できません。Googleアカウントがあればデフォルトで安全であり、通常の場合、セットアップが先に完了しています。</p><p><strong>追記</strong>：任意のメールアドレスでGoogleアカウントを持つことができるようですが、もし私のようにシングルサインオン（SSO）にGoogle for Work（Google Apps）を使用しているなら、もう既に設定されています。Amazonも多要素認証（MFA）をサポートしていますが、ユーザを新たに作る必要があります。</p><p>私たちは、YouTube、Gmail、Googleアナリティクスを実行するインフラストラクチャで作業がしたかったので、GCPへ移行しました。Googleが有望で、はるかにテクノロジに精通していて、ちゃんと動作するプロダクトを提供しているからです。</p><p><strong>追記：</strong>Google（検索エンジン、YouTube、Gmail）でGCPが使用されているかどうかは分かりません。Googleは確かにGCPを作成し、無事に公開しましたが、内部では次の大仕事に取り組んでいます。</p><p>AWSがすばらしいということに変わりはありませんが、re:inventの時期に合わせて新しい中途半端な機能を公開する前に問題を解決してくれることを願っています。</p><p>「AWSを使用してクビになった人は今までいないと思います。AWSはクラウド分野でIBMのような存在です」と書いた人がいましたが、全くの同感です。しかし、自分の好きなようにして、さらに先を見たいなら、GCPを選んでください。</p><p>ただし、効果は人それぞれです。</p><p>特定のプロダクト（つまり、Pub/SubとKinesisや、Google CDNとCloudFront）を比較する詳細な記事を書くつもりですので、ブログか<a href="https://twitter.com/mluggy" rel="nofollow" title="" class="ext-link">Twitter</a>をフォローしてください。</p><p><strong>追記は</strong><a href="https://news.ycombinator.com/item?id=12235003" rel="nofollow" title="" class="ext-link">Hacker News</a>での賛否両論に基づいています。</p>
