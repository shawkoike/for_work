<p><a href="http://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing" rel="nofollow" title="" class="ext-link">Why is printing “B” dramatically slower than printing “#”?</a> （2014-02-21） asked by <a href="http://stackoverflow.com/users/1732709/kuba-spatny" rel="nofollow" title="" class="ext-link">Kuba Spatny</a> on <a href="http://stackoverflow.com/" rel="nofollow" title="" class="ext-link">stackoverflow</a></p><p><code>1000</code> x <code>1000</code>のマトリックスを2つ作りました。</p><p>1つ目のマトリックス：<code>O</code>と<code>#</code><br>
2つ目のマトリックス：<code>O</code>と<code>B</code></p><p>次に示すコードを使うと、1つ目のマトリックスは出力が完了するまでに8.52秒かかりました。</p><p>以下のコードで、2つ目のマトリックスは出力が完了するまでに259.152秒かかりました。</p><p>これほど実行時間に著しい差異が生じたのは、なぜでしょうか？</p><p>コメントで示されている通り、<code>System.out.print("#");</code>だけの表示ならば、かかる時間は7.8871秒なのですが、<code>System.out.print("B");</code>を含むと<code>still printing...</code>となってしまいます。</p><p>自分の環境では問題がなかったと指摘する方々もいらっしゃるように、この2つのコードを試しに<a href="http://ideone.com/" rel="nofollow" title="" class="ext-link">Ideone.com</a>で実行してみたところ、同じ速さで実行できました。</p><p>テスト条件は次の通りです。</p><p>asked by <a href="http://stackoverflow.com/users/1732709/kuba-spatny" rel="nofollow" title="" class="ext-link">Kuba Spatny</a></p><p><em>まったくの推測</em>なのですが、使っている端末が、文字単位の折り返しではなく<a href="http://en.wikipedia.org/wiki/Word_wrap" rel="nofollow" title="" class="ext-link">ワードラップ</a>を行っており、<code>B</code>は単語を構成する文字として、<code>#</code>は単語を構成しない文字として扱っているのではないでしょうか。つまり、行末に達して、折り返すべき位置を探す際、<code>#</code>であればほぼ即時に適切にその位置で折り返すことができます。それに比べると、<code>B</code>の方が折り返し位置を探す時間は長くなりますし、折り返すべきテキストも多くなるかもしれません（これは端末によっては、コストの高い処理となる可能性があります。例えば、バックスペースを出力したあと、折り返されている文字の部分を上書きするためのスペースを出力するかもしれません）。</p><p>ただし、上記はあくまでも推測です。</p><p>community wiki by <a href="http://stackoverflow.com/users/157247" rel="nofollow" title="" class="ext-link">T.J. Crowder</a></p><p>EclipseとNetBeans 8.0.2の両環境でテストしてみました。いずれもJavaのバージョンは1.8で、計測には<code>System.nanoTime()</code>を使いました。</p><p><strong>どちらの場合も同じ時間</strong>がかかりました。<strong>1.564秒</strong>ぐらいです。</p><p>つまり、NetBeansではコンソール表示のパフォーマンスが悪いようです。</p><p>さらに調べた結果、NetBeansでは<a href="http://en.wikipedia.org/wiki/Line_wrap_and_word_wrap" rel="nofollow" title="" class="ext-link">行折り返し</a>が最大バッファで行われることが問題であると分かりました（これは<code>System.out.println</code>コマンドに限りません）。以下のコードで確認できます。</p><p>試した結果、かかった時間は例外を除いてどの繰り返しでも1ミリ秒未満となり、<strong>5回目ごとの繰り返し</strong>の際に限って225ミリ秒ぐらいかかりました。次のような状況です（単位はナノ秒）。</p><p>以下、続いていきます。</p><p>answered by <a href="http://stackoverflow.com/users/3962211/roy-shmuli" rel="nofollow" title="" class="ext-link">Roy Shmuli</a></p>
